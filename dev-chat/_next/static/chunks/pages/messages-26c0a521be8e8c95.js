(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[313],{7439:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/messages",function(){return n(5427)}])},6395:function(e,t,n){"use strict";n.d(t,{n:function(){return r.n}});var r=n(7637)},5427:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return b}});var r=n(4051),o=n.n(r),s=n(5893),a=n(6395),i=n(7294),c=n(5615),u=n(11),f=n.n(u);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(e,t,n,r,o,s,a){try{var i=e[s](a),c=i.value}catch(u){return void n(u)}i.done?t(c):Promise.resolve(c).then(r,o)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var s=e.apply(t,n);function a(e){m(s,r,o,a,i,"next",e)}function i(e){m(s,r,o,a,i,"throw",e)}a(void 0)}))}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return!t||"object"!==_(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var _=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function y(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g(this,n)}}var b=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(n,e);var t=y(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).messageService=a.n.get(c.e),r.state={isLoading:!0,error:!1,messages:[]},r.messagesContainerRef=i.createRef(),r}var r=n.prototype;return r.componentDidMount=function(){var e=this;return p(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e._messageStreamSet||(e.setRandomInterval((function(){e.getMessage()}),500,5e3),e._messageStreamSet=!0),e.scrollToBottom();case 2:case"end":return t.stop()}}),t)})))()},r.componentDidUpdate=function(){this.scrollToBottom()},r.setRandomInterval=function(e,t,n){var r,o=function(){var s=Math.floor(Math.random()*(n-t+1))+t;r=setTimeout((function(){e(),o()}),s)};return o(),{clear:function(){clearTimeout(r)}}},r.getMessage=function(){var e=this;return p(o().mark((function t(){var n,r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=e.messageService.getMessage(),t.next=4,n;case 4:r=t.sent,e.setState((function(e){return{isLoading:!1,data:r,messages:Array.isArray(null===e||void 0===e?void 0:e.messages)?v(e.messages).concat([r]):[r]}})),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),e.setState({isLoading:!1,error:!0,errorMessage:t.t0.toString()});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},r.scrollToBottom=function(){this.messagesContainerRef.current.scrollTop=this.messagesContainerRef.current.scrollHeight},r.render=function(){var e=this.state,t=e.isLoading,n=e.error,r=e.errorMessage,o=(e.data,e.messages);return(0,s.jsxs)("div",{id:"messagesContainer",ref:this.messagesContainerRef,className:f().messagesContainer,children:[t&&(0,s.jsx)("div",{children:"Loading..."}),t&&n&&(0,s.jsxs)("div",{children:["Error ",r]}),!t&&!n&&o.map((function(e){return(0,s.jsxs)("div",{className:f().messageCard,children:[(0,s.jsxs)("h2",{className:f().messageAuthor,children:[e.author,":"]}),(0,s.jsx)("p",{className:f().messageBody,children:e.message||e.title})]},e.id)}))]})},n}(i.Component)},5615:function(e,t,n){"use strict";n.d(t,{e:function(){return r.e}});var r=n(2671)},11:function(e){e.exports={inputArea:"messages_inputArea__RrsOz",messagesContainer:"messages_messagesContainer__iC_EJ",messageCard:"messages_messageCard__ylPSz",fadeInUp:"messages_fadeInUp__s_zeE",me:"messages_me__DoHUk",messageAuthor:"messages_messageAuthor__2Eo9t",messageBody:"messages_messageBody__AHUqt"}}},function(e){e.O(0,[774,888,179],(function(){return t=7439,e(e.s=t);var t}));var t=e.O();_N_E=t}]);